<div class="portal-grid">
  <h2 class="h2-grid">Details for Quiz "{{selectedQuizTitle}}":</h2>
  <span class="left-btn">
    <button mat-mini-fab color="accent" class="red-fab-btn" (click)="closePreview()"><mat-icon>arrow_back_ios</mat-icon></button>
  </span>
  <span class="left-2nd-btn">
    <button mat-mini-fab color="accent" class="green-fab-btn" (click)="saveChanges()"><mat-icon>save</mat-icon></button>
  </span>
  <span class="right-btn">
    <button mat-mini-fab color="accent" class="green-fab-btn" (click)="start()"><mat-icon>fast_forward</mat-icon></button>
  </span>

  <span class="content-grid">
    <cdk-accordion class="preview-accordion">
      <cdk-accordion-item *ngFor="let round of selectedQuizRounds; let position = index;"
                          #accordionItem="cdkAccordionItem"
                          class="quiz-accordion-round"
                          role="button"
                          tabindex="0"
                          [attr.id]="'accordion-header-' + position"
                          [attr.aria-expanded]="accordionItem.expanded"
                          [attr.aria-controls]="'accordion-body-' + position"
      >
        <div class="quiz-accordion-round-target" (click)="accordionItem.toggle()">
          <span class="target-numeration-element">
            Round {{ position+1 }}:
          </span>

          <span class="target-word-tease">
            {{ round.roundTarget }}
          </span>
        </div>

        <div class="quiz-accordion-round-details"
                          role="region"
                          [style.display]="accordionItem.expanded ? '' : 'none'"
                          [attr.id]="'accordion-body-' + position"
                          [attr.aria-labelledby]="'accordion-header-' + position">
          <div class="inter-title" style="margin-top: 0">
            Target Word:
          </div>

          <ng-container>
            <div [formGroup]="wordCalcForm">
              <div [formArrayName]="round.id.toString()">
                <div  *ngFor="let word of wordCalcForm.get(round.id.toString())?.value; let i = index;  trackBy: trackByFn">
                  <div [formGroupName]="i">
                    <span class="center">
                      <input type="text" class="word-calc-input" placeholder="enter word"  formControlName="word" autofocus>
                      <button mat-icon-button class="remove" color="warn" [disabled]="(i===0 && onlyOneField(round.id.toString())) || (!addFieldDisabled && i==0)" (click)="removeField(round.id.toString(), i)">
                        <mat-icon>remove_circle</mat-icon>
                      </button>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
          <div class="center">
                <ng-template [ngIf]="allIndexWordNonEmpty(round.id.toString()) || (onlyOneField(round.id.toString()) && allIndexWordNonEmpty(round.id.toString()))">
                  <button mat-raised-button color="accent" class="marginalized" (click)="addField(round.id.toString())">Add Field</button>
                </ng-template>
              </div>
              <ng-template [ngIf]="errorMsg">
                <p class="error-message">
                  {{ errorMsg }}
                </p>
              </ng-template>

          <div class="target-word-element">
            {{ round.roundTarget }}
          </div>

          <div class="inter-title">
            Forbidden Words:
          </div>
          <div *ngFor="let forbiddenWord of round.forbiddenWords">
            <div class="forbidden-word-element">
              {{ forbiddenWord }}
            </div>
          </div>
        </div>
      </cdk-accordion-item>
    </cdk-accordion>
  </span>
</div>
