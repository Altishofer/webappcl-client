<div class="portal-grid">
  <div class="right-2nd-btn">
    <input type="text" [(ngModel)]="newQuizTitle" class="editable-title">
    <button mat-icon-button class="edit-title-button" (click)="saveTitle(newQuizTitle)"><mat-icon>save</mat-icon></button>
  </div>

  <h2 class="h2-grid">"{{selectedQuizTitle}}":</h2>

  <span class="left-btn">
    <button mat-mini-fab color="accent" class="red-fab-btn" (click)="closePreview()"><mat-icon>arrow_back_ios</mat-icon></button>
  </span>

  <span class="left-2nd-btn">
    <button mat-mini-fab color="accent" class="green-fab-btn" (click)="saveChanges()"><mat-icon>save</mat-icon></button>
  </span>

  <span class="right-btn">
    <button mat-mini-fab color="accent" class="green-fab-btn" (click)="start()"><mat-icon>fast_forward</mat-icon></button>
  </span>

  <span class="content-grid">
    <cdk-accordion class="preview-accordion">
      <cdk-accordion-item *ngFor="let round of selectedQuizRounds; let position = index;"
                          #accordionItem="cdkAccordionItem"
                          class="quiz-accordion-round"
                          role="button"
                          tabindex="0"
                          [attr.id]="'accordion-header-' + position"
                          [attr.aria-expanded]="accordionItem.expanded"
                          [attr.aria-controls]="'accordion-body-' + position"
      >
        <div class="quiz-accordion-round-target" (click)="accordionItem.toggle()">
          <span class="target-numeration-element">
            Round {{ position+1 }}:
          </span>

          <span class="target-word-tease">
            {{ round.roundTarget }}
          </span>

          <span class="delete-btn-grid">
            <button mat-icon-button class="remove" color="warn" (click)="removeRound(round.id.toString())">
              <mat-icon>delete</mat-icon>
            </button>
          </span>
        </div>

        <div class="quiz-accordion-round-details"
                          role="region"
                          [style.display]="accordionItem.expanded ? '' : 'none'"
                          [attr.id]="'accordion-body-' + position"
                          [attr.aria-labelledby]="'accordion-header-' + position">
          <div class="target-word-title" style="margin-top: 0">
            Target Word:
          </div>

          <ng-container>
            <div class="target-word-element" [formGroup]="targetWordForm">
              <div [formGroupName]="round.id.toString()">
                <span>
                  <input type="text" class="quiz-creation-input" placeholder="enter target word"  formControlName="word" autofocus>
                </span>
              </div>
            </div>
          </ng-container>

          <div class="forbidden-word-title">
            Forbidden Words:
          </div>
          <ng-container>
            <div [formGroup]="forbiddenWordsForm" class="forbidden-word-container">
              <div [formArrayName]="round.id.toString()">
                <div  *ngFor="let control of getControls(round.id.toString()); let i = index;  trackBy: trackByFn" class="forbidden-word-inline">
                  <span [formGroupName]="i" class="forbidden-word-element">
                    <input type="text" class="quiz-creation-input" placeholder="enter word"  formControlName="word" autofocus>
                  </span>

                  <span class="forgotten-grid-btn">
                    <button mat-icon-button class="remove" color="warn" [disabled]="(i===0 && onlyOneField(round.id.toString())) || (!addFieldDisabled && i==0)" (click)="removeField(round.id.toString(), i)">
                      <mat-icon>remove_circle</mat-icon>
                    </button>
                  </span>
                </div>
              </div>
            </div>
          </ng-container>

          <div class="add-btn-grid">
            <ng-template [ngIf]="allIndexWordNonEmpty(round.id.toString()) || (onlyOneField(round.id.toString()) && allIndexWordNonEmpty(round.id.toString()))">
              <button mat-mini-fab color="positive" class="marginalized" (click)="addField(round.id.toString())">
                <mat-icon>
                  add
                </mat-icon>
              </button>
            </ng-template>
          </div>

          <ng-template [ngIf]="errorMsg">
            <p class="error-message">
              {{ errorMsg }}
            </p>
          </ng-template>
        </div>
      </cdk-accordion-item>
    </cdk-accordion>
  </span>

  <span class="footer-grid">
    <button mat-raised-button color="positive" (click)="addNewRound()">
      <mat-icon>
        add
      </mat-icon>
      Add Round
    </button>
  </span>
</div>
